{"version":3,"sources":["help.js","pip-webui-help-html.js","help_page/help_page.js","help_service/help_service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-help.js","sourcesContent":["/**\n * @file Registration of all help components\n * @copyright Digital Living Software Corp. 2014-2016\n */\n\n(function (angular) {\n    'use strict';\n\n    angular.module('pipHelp', [\n        'pipHelp.Service',\n        'pipHelp.Page'\n    ]);\n\n})(window.angular);\n","(function(module) {\ntry {\n  module = angular.module('pipHelp.Templates');\n} catch (e) {\n  module = angular.module('pipHelp.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('help_page/help_page.html',\n    '<!--\\n' +\n    '@file Help page\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar>\\n' +\n    '\\n' +\n    '<pip-document width=\"800\" min-height=\"400\">\\n' +\n    '    <div class=\"pip-menu-container pip-help\"\\n' +\n    '         ng-if=\"manager !== false\">\\n' +\n    '        <md-list class=\"pip-menu pip-simple-list hide-xs\"\\n' +\n    '                 pip-selected=\"selected.pageIndex\"\\n' +\n    '                 pip-selected-watch=\"selected.navId\"\\n' +\n    '                 pip-select=\"onNavigationSelect($event.id)\">\\n' +\n    '            <md-list-item class=\"pip-simple-list-item pip-selectable\"\\n' +\n    '                          ng-repeat=\"page in pages track by page.state\"\\n' +\n    '                          md-ink-ripple\\n' +\n    '                          pip-id=\"{{::page.state }}\">\\n' +\n    '                <p> {{::page.title | translate}} </p>\\n' +\n    '            </md-list-item>\\n' +\n    '        </md-list>\\n' +\n    '\\n' +\n    '        <div class=\"pip-content-container\">\\n' +\n    '            <pip-dropdown class=\"hide-gt-xs\"\\n' +\n    '                          pip-actions=\"pages\"\\n' +\n    '                          pip-dropdown-select=\"onDropdownSelect\"\\n' +\n    '                          pip-active-index=\"selected.pageIndex\"></pip-dropdown>\\n' +\n    '            <div class=\"pip-body layout-column flex\" ui-view></div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"layout-column layout-align-center-center flex\"\\n' +\n    '         ng-if=\"manager === false\">\\n' +\n    '        {{::\\'ERROR_400\\' | translate}}\\n' +\n    '    </div>\\n' +\n    '</pip-document>');\n}]);\n})();\n","/**\n * @file Page template for help components\n * @copyright Digital Living Software Corp. 2014-2016\n */\n\n(function (angular, _) {\n    'use strict';\n\n    config.$inject = ['pipStateProvider'];\n    HelpPageController.$inject = ['$rootScope', '$scope', '$state', 'pipAppBar', 'pipHelp'];\n    angular.module('pipHelp.Page', ['pipState', 'pipHelp.Service', 'pipAppBar', 'pipSelected', 'pipTranslate',\n        'pipHelp.Templates'])\n        .config(config)\n        .controller('pipHelpPageController', HelpPageController);\n\n    function config(pipStateProvider) {\n        pipStateProvider.state('help', {\n            url: '/help',\n            auth: true,\n            controller: 'pipHelpPageController',\n            templateUrl: 'help_page/help_page.html'\n        });\n    }\n\n    /**\n     * @ngdoc controller\n     * @name pipHelp.Page.pipHelpPageController\n     *\n     * @description\n     * The controller is used for the root Help component.\n     * It manages available pages provide navigation through those ones.\n     *\n     * @param {Object} $rootScope   Root scope object\n     * @param {Object} $scope       Scope for the current controller\n     * @param {Object} $state       UI Router service\n     * @param {Object} pipAppBar    Service provides an interface to manage on application bar header.\n     * @param {Object} pipHelp      Service to manage this component behaviour\n     */\n    function HelpPageController($rootScope, $scope, $state, pipAppBar, pipHelp) {\n\n        $scope.pages = _.filter(pipHelp.getPages(), function (page) {\n            if (page.visible && (page.access !== angular.noop ? page.access($rootScope.$user, page) : true)) {\n                return page;\n            }\n        });\n        $scope.selected = {};\n\n        if ($state.current.name !== 'help') {\n            initSelect($state.current.name);\n        } else {\n            initSelect(pipHelp.getDefaultPage().state);\n        }\n        appHeader();\n\n        $scope.onNavigationSelect = onNavigationSelect;\n        $scope.onDropdownSelect = onDropdownSelect;\n\n        /**\n         * @ngdoc method\n         * @name pipHelp.Page.pipHelpPageController#onDropdownSelect\n         * @methodOf pipHelp.Page.pipHelpPageController\n         *\n         * @description\n         * It redirects to a passed state.\n         *\n         * @param {Object} state    State configuration object\n         */\n        function onDropdownSelect(state) {\n            onNavigationSelect(state.state);\n        }\n\n        /**\n         * Config appBar due to this page\n         */\n        function appHeader() {\n            pipAppBar.showMenuNavIcon();\n            pipAppBar.showTitleText('Help');\n            pipAppBar.showShadowSm();\n            pipAppBar.showLocalActions(null, []);\n        }\n\n        /**\n         * @ngdoc method\n         * @name pipHelp.Page.pipHelpPageController#onNavigationSelect\n         * @methodOf pipHelp.Page.pipHelpPageController\n         *\n         * @description\n         * It redirects to a passed state.\n         *\n         * @param {string} state    Name of the target state.\n         */\n        function onNavigationSelect(state) {\n            initSelect(state);\n\n            if ($scope.selected.page) {\n                $state.go(state);\n            }\n        }\n\n        /**\n         * Set selected item for highlighting in the nav menu\n         */\n        function initSelect(state) {\n            $scope.selected.page = _.find($scope.pages, function (page) {\n                return page.state === state;\n            });\n            $scope.selected.pageIndex = _.indexOf($scope.pages, $scope.selected.page);\n            $scope.selected.pageId = state;\n        }\n    }\n})(window.angular, window._);\n","/**\n * @file Service for help components\n * @copyright Digital Living Software Corp. 2014-2016\n */\n\n(function (angular, _) {\n    'use strict';\n\n    /**\n     * @ngdoc service\n     * @name pipHelp.Service.pipHelp\n     *\n     * @description\n     * This service is provided an interface to manage the Help component.\n     * It is available on the config and run application phases. On the both phases the interface is the same.\n     * This module requires the 'pipState' module.\n     *\n     * @requires pipState\n     */\n    angular.module('pipHelp.Service', ['pipState'])\n        .provider('pipHelp',\n            ['pipAuthStateProvider', function (pipAuthStateProvider) {\n                var defaultPage,\n                    pages = [];\n\n                /** @see addPage */\n                this.addPage = addPage;\n\n                /** @see setDefaultPage */\n                this.setDefaultPage = setDefaultPage;\n\n                /** @see getPages */\n                this.getPages = getPages;\n\n                /** @see getDefaultPage */\n                this.getDefaultPage = getDefaultPage;\n\n                this.$get = function () {\n                    return {\n                        /** @see getPages */\n                        getPages: getPages,\n\n                        /** @see getDefaultPage */\n                        getDefaultPage: getDefaultPage,\n\n                        /** @see addPage */\n                        addPage: addPage,\n\n                        /** @see setDefaultPage */\n                        setDefaultPage: setDefaultPage\n                    };\n                };\n\n                /**\n                 * This method build the full name of state within the abstract 'help' state\n                 */\n                function getFullStateName(state) {\n                    return 'help.' + state;\n                }\n\n                /**\n                 * @ngdoc method\n                 * @name pipHelp.Service.pipHelp#getPages\n                 * @methodOf pipHelp.Service.pipHelp\n                 *\n                 * @description\n                 * This method returns asset of all pages registered in the Help component.\n                 *\n                 * @returns {Array<Object>} List of registered states\n                 *\n                 * @example\n                 * <pre>\n                 * // on the config phase\n                 * pipHelpProvider.getPages();\n                 * </pre>\n                 */\n                function getPages() {\n                    return _.clone(pages, true);\n                }\n\n                /**\n                 * @ngdoc method\n                 * @name pipHelp.Service.pipHelp#getDefaultPage\n                 * @methodOf pipHelp.Service.pipHelp\n                 *\n                 * @description\n                 * This method return name of the default state.\n                 *\n                 * @returns {string} Name of the state\n                 *\n                 * @example\n                 * <pre>\n                 * // on the config phase\n                 * pipHelpProvider.getDefaultPage();\n                 * </pre>\n                 */\n                function getDefaultPage() {\n                    return _.clone(_.find(pages, function (page) {\n                        return page.state === defaultPage;\n                    }), true);\n                }\n\n                /**\n                 * @ngdoc method\n                 * @name pipHelp.Service.pipHelp#addPage\n                 * @methodOf pipHelp.Service.pipHelp\n                 *\n                 * @description\n                 * This method allows add new page into navigation menu. It accepts config object to define new state\n                 * with needed params.\n                 *\n                 * @param {Object} pageObj Configuration object contains settings for another page\n                 * @param {Object.<string>} pageObj.state   Name of page state which is available via UI router\n                 * @param {Object.<string>} pageObj.title   Page title in the navigation menu.\n                 * @param {Object.<boolean>} pageObj.access If it is true it will be available only for logged in users\n                 * @param {Object.<boolean>} pageObj.visible If it is true the page will be visible\n                 * @param {Object.<Object>} pageObj.stateConfig  Configuration object in format like UI Router state\n                 *\n                 * @example\n                 * <pre>\n                 *  // on the config phase\n                 *  pipHelpProvider.addPage({\n                 *      state: 'test',\n                 *      title: 'Test help page',\n                 *      auth: true,\n                 *      stateConfig: {\n                 *          url: '/test',\n                 *          templateUrl: 'help/help_test1.html'\n                 *      }\n                 *  });\n                 * </pre>\n                 */\n                function addPage(pageObj) {\n                    var page;\n\n                    validatePage(pageObj);\n\n                    page = _.find(pages, function (page) {\n                        return page.state === getFullStateName(pageObj.state);\n                    });\n                    if (page) {\n                        throw new Error('Page with state name \"' + pageObj.state + '\" is already registered');\n                    }\n\n                    pages.push({\n                        state: getFullStateName(pageObj.state),\n                        title: pageObj.title,\n                        access: pageObj.access || angular.noop,\n                        visible: pageObj.visible || true,\n                        stateConfig: _.clone(pageObj.stateConfig, true)\n                    });\n\n                    pipAuthStateProvider.state(getFullStateName(pageObj.state), pageObj.stateConfig);\n\n                    // if we just added first state and no default state is specified\n                    if (_.isUndefined(defaultPage) && pages.length === 1) {\n                        setDefaultPage(pageObj.state);\n                    }\n                }\n\n                /**\n                 * @ngdoc method\n                 * @name pipHelp.Service.pipHelp#setDefaultPage\n                 * @methodOf pipHelp.Service.pipHelp\n                 *\n                 * @description\n                 * This method establishes passed state as default which is redirected at after transfer on abstract\n                 * state\n                 *\n                 * @param {Object} name     Name of the state\n                 *\n                 * @example\n                 * <pre>\n                 * pipHelpProvider.setDefaultPage('test');\n                 * </pre>\n                 */\n                function setDefaultPage(name) {\n                    var page, error;\n\n                    page = _.find(pages, function (page) {\n                        return page.state === getFullStateName(name);\n                    });\n                    if (!page) {\n                        error = new Error('Page with state name \"' + name + '\" is not registered');\n                        throw error;\n                    }\n\n                    defaultPage = getFullStateName(name);\n\n                    pipAuthStateProvider.redirect('help', getFullStateName(name));\n                }\n\n                /**\n                 * This method validates passed state.\n                 * If it is incorrect it will throw an error.\n                 */\n                function validatePage(pageObj) {\n                    if (!pageObj || !_.isObject(pageObj)) {\n                        throw new Error('Invalid object');\n                    }\n\n                    if (!pageObj.state || pageObj.state === '') {\n                        throw new Error('Page should have valid Angular UI router state name');\n                    }\n\n                    if (pageObj.access && !_.isFunction(pageObj.access)) {\n                        throw new Error('\"access\" should be a function');\n                    }\n\n                    if (!pageObj.stateConfig || !_.isObject(pageObj.stateConfig)) {\n                        throw new Error('Invalid state configuration object');\n                    }\n                }\n            }]);\n\n})(window.angular, window._);\n"],"sourceRoot":"/source/"}