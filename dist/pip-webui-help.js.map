{"version":3,"sources":["pip-webui-help-html.js","help.js","help_page/help_page.js","help_service/help_service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-help.js","sourcesContent":["(function(module) {\ntry {\n  module = angular.module('pipHelp.Templates');\n} catch (e) {\n  module = angular.module('pipHelp.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('help_page/help_page.html',\n    '<!--\\n' +\n    '@file Help page\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar>\\n' +\n    '\\n' +\n    '<pip-document width=\"800\" min-height=\"400\">\\n' +\n    '    <div ng-hide=\"manager === false\"\\n' +\n    '         class=\"pip-menu-container pip-help\">\\n' +\n    '        <md-list class=\"pip-menu pip-simple-list hide-xs\"\\n' +\n    '                 pip-selected=\"selected.pageIndex\"\\n' +\n    '                 pip-selected-watch=\"selected.navId\"\\n' +\n    '                 pip-select=\"onNavigationSelect($event.id)\">\\n' +\n    '            <md-list-item class=\"pip-simple-list-item pip-selectable\" md-ink-ripple\\n' +\n    '                          ng-repeat=\"page in pages track by page.state\"\\n' +\n    '                          pip-id=\"{{::page.state }}\">\\n' +\n    '                <p> {{::page.title | translate}} </p>\\n' +\n    '            </md-list-item>\\n' +\n    '        </md-list>\\n' +\n    '\\n' +\n    '        <div class=\"pip-content-container\">\\n' +\n    '            <pip-dropdown class=\"hide-gt-xs\"\\n' +\n    '                          pip-actions=\"pages\"\\n' +\n    '                          pip-dropdown-select=\"onDropdownSelect\"\\n' +\n    '                          pip-active-index=\"selected.pageIndex\"></pip-dropdown>\\n' +\n    '            <div class=\"pip-body layout-column flex\" ui-view></div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '    <div ng-show=\"manager === false\"\\n' +\n    '         class=\"layout-column layout-align-center-center flex\">\\n' +\n    '        {{::\\'ERROR_400\\' | translate}}\\n' +\n    '    </div>\\n' +\n    '</pip-document>');\n}]);\n})();\n","/**\r\n * @file Registration of all help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    angular.module('pipHelp', [\r\n        'pipHelp.Service',\r\n        'pipHelp.Page'\r\n    ]);\r\n    \r\n})(window.angular);","/**\r\n * @file Page template for help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    config.$inject = ['pipStateProvider'];\r\n    HelpPageController.$inject = ['$scope', '$rootScope', '$state', 'pipAppBar', 'pipHelp'];\r\n    angular.module('pipHelp.Page', ['pipState', 'pipHelp.Service',  'pipAppBar', 'pipSelected', 'pipTranslate', 'pipHelp.Templates'])\r\n        .config(config)\r\n        .controller('pipHelpPageController', HelpPageController);\r\n\r\n    function config(pipStateProvider) {\r\n        pipStateProvider.state('help', {\r\n            url: '/help',\r\n            auth: true,\r\n            controller: 'pipHelpPageController',\r\n            templateUrl: 'help_page/help_page.html'\r\n        });\r\n    }\r\n\r\n    function HelpPageController($scope, $rootScope, $state,  pipAppBar, pipHelp) {\r\n\r\n        $scope.pages = _.filter(pipHelp.getPages(), function (page) {\r\n            if (page.visible && (page.access ? page.access($rootScope.$user, page) : true)) {\r\n                return page;\r\n            }\r\n        });\r\n        $scope.selected = {};\r\n\r\n        if ($state.current.name != 'help')\r\n            initSelect($state.current.name);\r\n        else\r\n            initSelect(pipHelp.getDefaultPage().state);\r\n        appHeader();\r\n\r\n        $scope.onNavigationSelect = onNavigationSelect;\r\n        $scope.onDropdownSelect = onDropdownSelect;\r\n\r\n        return;\r\n\r\n        function onDropdownSelect(state) {\r\n            onNavigationSelect(state.state);\r\n        }\r\n\r\n        function appHeader () {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showTitleText('Help');\r\n            pipAppBar.showShadowSm();\r\n            pipAppBar.showLocalActions(null,[]);\r\n        };\r\n\r\n        function onNavigationSelect  (state) {\r\n            initSelect(state);\r\n\r\n            if ($scope.selected.page) {\r\n                $state.go(state);\r\n            }\r\n        };\r\n\r\n        function initSelect(state) {\r\n            $scope.selected.page = _.find($scope.pages, function(page) { return page.state == state; });\r\n            $scope.selected.pageIndex = _.indexOf($scope.pages, $scope.selected.page);\r\n            $scope.selected.pageId = state;\r\n        }\r\n    }\r\n})(window.angular, window._);","/**\r\n * @file Service for help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    angular.module('pipHelp.Service', ['pipState'])\r\n        .provider('pipHelp',\r\n        ['pipAuthStateProvider', function(pipAuthStateProvider) {\r\n            var defaultPage,\r\n                pages = [];\r\n\r\n            /** @see addPage */\r\n            this.addPage = addPage;\r\n\r\n            /** @see setDefaultPage */\r\n            this.setDefaultPage = setDefaultPage;\r\n\r\n            /** @see getPages */\r\n            this.getPages = getPages;\r\n\r\n            /** @see getDefaultPage */\r\n            this.getDefaultPage = getDefaultPage;\r\n\r\n            this.$get = function () {\r\n                return {\r\n                    /** @see getPages */\r\n                    getPages: getPages,\r\n\r\n                    /** @see getDefaultPage */\r\n                    getDefaultPage: getDefaultPage,\r\n\r\n                    /** @see addPage */\r\n                    addPage: addPage,\r\n\r\n                    /** @see setDefaultPage */\r\n                    setDefaultPage: setDefaultPage\r\n                }\r\n            }\r\n\r\n            function getFullStateName(state) {\r\n                return 'help.' + state;\r\n            }\r\n\r\n            function getPages () {\r\n                return _.clone(pages, true);\r\n            }\r\n\r\n            function getDefaultPage() {\r\n                return _.clone(_.find(pages, function(page) { return page.state === defaultPage; }), true);\r\n            }\r\n\r\n\r\n            function addPage(pageObj) {\r\n                validatePage(pageObj);\r\n\r\n                if (_.find(pages, function(page) { return page.state === getFullStateName(pageObj.state); })) {\r\n                    throw new Error('Page with state name \"' + pageObj.state + '\" is already registered');\r\n                }\r\n\r\n                pages.push({\r\n                    state: getFullStateName(pageObj.state),\r\n                    title: pageObj.title,\r\n                    access: pageObj.access,\r\n                    visible: pageObj.visible !== false,\r\n                    stateConfig: _.clone(pageObj.stateConfig, true)\r\n                });\r\n\r\n                pipAuthStateProvider.state(getFullStateName(pageObj.state), pageObj.stateConfig);\r\n\r\n                // if we just added first state and no default state is specified\r\n                if ( _.isUndefined(defaultPage) && pages.length === 1) {\r\n                    setDefaultPage(pageObj.state);\r\n                }\r\n            }\r\n\r\n            function setDefaultPage(name) {\r\n                if (!_.find(pages, function(page) { return page.state === getFullStateName(name); })) {\r\n                    throw new Error('Page with state name \"' + name + '\" is not registered');\r\n                }\r\n\r\n                defaultPage = getFullStateName(name);\r\n\r\n                pipAuthStateProvider.redirect('help', getFullStateName(name));\r\n            }\r\n\r\n            function validatePage(pageObj) {\r\n                if (!pageObj || !_.isObject(pageObj)) {\r\n                    throw new Error('Invalid object');\r\n                }\r\n\r\n                if (pageObj.state == null || pageObj.state == '') {\r\n                    throw new Error('Page should have valid Angular UI router state name');\r\n                }\r\n\r\n                if (pageObj.access && !_.isFunction(pageObj.access)) {\r\n                    throw new Error('\"access\" should be a function');\r\n                }\r\n\r\n                if (!pageObj.stateConfig || !_.isObject(pageObj.stateConfig )) {\r\n                    throw new Error('Invalid state configuration object');\r\n                }\r\n            }\r\n        }]);\r\n\r\n\r\n})(window.angular, window._);"],"sourceRoot":"/source/"}