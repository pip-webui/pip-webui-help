{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/dependencies/TranslateFilter.ts","src/index.ts","src/page/HelpPage.ts","src/page/HelpPageRoutes.ts","src/page/index.ts","src/service/HelpConfig.ts","src/service/HelpPageSelectedTab.ts","src/service/HelpService.ts","src/service/HelpStateConfig.ts","src/service/HelpTab.ts","src/service/index.ts","temp/pip-webui-help-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-help.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","{\r\n    function filter($injector: ng.auto.IInjectorService) {\r\n         let pipTranslate: any = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return (key) => {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }\r\n\r\n    angular.module('pipHelp.Translate', [])\r\n           .filter('translate', filter);\r\n\r\n}\r\n","﻿import './service';\r\nimport './page';\r\n\r\nangular.module('pipHelp', [\r\n    'pipHelp.Service',\r\n    'pipHelp.Page'\r\n]);\r\n\r\nexport * from './service';\r\n","import { IHelpService } from '../service/IHelpService';\r\nimport { HelpTab } from '../service/HelpTab';\r\nimport { HelpPageSelectedTab } from '../service/HelpPageSelectedTab';\r\n\r\ninterface IHelpPage {\r\n    tabs: HelpTab[];\r\n    selected: HelpPageSelectedTab;\r\n    onDropdownSelect: Function;\r\n    onNavigationSelect(state: string): void;\r\n}\r\n\r\nclass HelpPageController implements IHelpPage, ng.IController {\r\n    public tabs: HelpTab[];\r\n    public selected: HelpPageSelectedTab;\r\n    public onDropdownSelect: Function;\r\n\r\n    constructor(\r\n        private $log: ng.ILogService,\r\n        private $state: ng.ui.IStateService,\r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService,\r\n        pipNavService: pip.nav.INavService,\r\n        pipHelp: IHelpService\r\n    ) {\r\n\r\n        this.tabs = _.filter(pipHelp.getTabs(), (tab: HelpTab) =>{\r\n            if (tab.visible === true) {\r\n                    return tab;\r\n            }\r\n        });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = new HelpPageSelectedTab();\r\n        if (this.$state.current.name !== 'help') {\r\n            this.initSelect(this.$state.current.name);\r\n        } else if (this.$state.current.name === 'help' && pipHelp.getDefaultTab()) {\r\n            this.initSelect(pipHelp.getDefaultTab().state);\r\n        } else {\r\n            $timeout(() => {\r\n                if (pipHelp.getDefaultTab()) {\r\n                    this.initSelect(pipHelp.getDefaultTab().state);\r\n                }\r\n                if (!pipHelp.getDefaultTab() && this.tabs && this.tabs.length > 0) {\r\n                    this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Help\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string): void {\r\n        this.selected.tab = _.find(this.tabs, (tab: HelpTab) => {\r\n            return tab.state === state;\r\n        });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n        \r\n        this.$state.go(this.selected.tabId);\r\n    }\r\n\r\n    public onNavigationSelect(state: string): void {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this.$state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipHelp.Page')\r\n    .controller('pipHelpPageController', HelpPageController);\r\n","{\r\n    function configureHelpPageRoutes($stateProvider) {\r\n        $stateProvider\r\n            .state('help', {\r\n                url: '/help?party_id',\r\n                auth: true,\r\n                controllerAs: '$ctrl',\r\n                controller: 'pipHelpPageController',\r\n                templateUrl: 'page/HelpPage.html'\r\n            });      \r\n    }\r\n\r\n    angular.module('pipHelp.Page')\r\n        .config(configureHelpPageRoutes);\r\n}","angular.module('pipHelp.Page', [\r\n    'ui.router', \r\n    'pipHelp.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipHelp.Templates'\r\n    ]);\r\n\r\nimport './HelpPage';\r\nimport './HelpPageRoutes';","import { HelpTab } from './HelpTab';\r\n\r\nexport class HelpConfig {\r\n    public defaultTab: string;\r\n    public tabs: HelpTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: string = null;\r\n    public isNavIcon: boolean = true;\r\n}\r\n","import { HelpTab } from './HelpTab';\r\n\r\nexport class HelpPageSelectedTab {\r\n    public tab: HelpTab;\r\n    public tabIndex: number;\r\n    public tabId: string;\r\n}","import { HelpConfig } from \"./HelpConfig\";\r\nimport { HelpTab } from './HelpTab';\r\nimport { IHelpService } from \"./IHelpService\";\r\nimport { IHelpProvider } from \"./IHelpService\";\r\n\r\nclass HelpService implements IHelpService {\r\n\r\n    public constructor(private _config: HelpConfig) {\r\n        \"ngInject\";\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'help.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, (tab) => {\r\n            return tab.state === 'help.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab(): HelpTab {\r\n        let defaultTab: HelpTab;\r\n        defaultTab = _.find(this._config.tabs, (p: HelpTab) => {\r\n            return p.state === this._config.defaultTab;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText(newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo: string): string {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public getTabs(): HelpTab[] {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\nclass HelpProvider implements IHelpProvider, ng.IServiceProvider {\r\n    private _service: HelpService;\r\n    private _config: HelpConfig = new HelpConfig();\r\n\r\n    constructor(private $stateProvider: ng.ui.IStateProvider) { }\r\n\r\n    public getFullStateName(state: string): string {\r\n        return 'help.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): HelpTab {\r\n        let defaultTab: HelpTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (p) => {\r\n            return p.state === this._config.defaultTab;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: HelpTab): void {\r\n        let existingTab: HelpTab;\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, (p) => {\r\n            return p.state === 'help.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this.$stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof _.isUndefined(this._config.defaultTab) && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, (tab: HelpTab) => {\r\n            return tab.state === 'help.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //this.$stateProvider.go(this._config.defaultTab);\r\n        //pipAuthStateProvider.redirect('help', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n\r\n    private validateTab(tabObj: HelpTab) {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText(newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo: string): string {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (!_.isNull(value) && !_.isUndefined(value)) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get(): IHelpService {\r\n        \"ngInject\";\r\n\r\n        if (_.isNull(this._service) || _.isUndefined(this._service)) {\r\n            this._service = new HelpService(this._config);\r\n        }\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipHelp.Service')\r\n    .provider('pipHelp', HelpProvider);\r\n","export class HelpStateConfig {\r\n    public url: string;\r\n    public auth: boolean = false;\r\n    public templateUrl?: string;\r\n    public template?: string;\r\n}\r\n","import { HelpStateConfig } from './HelpStateConfig';\r\n\r\nexport class HelpTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: number;\r\n    public access: Function;\r\n    public visible: boolean;\r\n    public stateConfig: HelpStateConfig;\r\n}\r\n\r\n","angular\r\n    .module('pipHelp.Service', []);\r\n\r\nimport './HelpConfig';\r\nimport './HelpPageSelectedTab';\r\nimport './HelpTab';\r\nimport './HelpStateConfig';\r\nimport './HelpService';\r\n\r\nexport * from './HelpConfig';\r\nexport * from './HelpPageSelectedTab';\r\nexport * from './HelpTab';\r\nexport * from './HelpStateConfig';\r\nexport * from './HelpService';\r\n","(function(module) {\ntry {\n  module = angular.module('pipHelp.Templates');\n} catch (e) {\n  module = angular.module('pipHelp.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('page/HelpPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar><pip-document width=\"800\" min-height=\"400\" class=\"pip-help\"><div class=\"pip-menu-container\" ng-hide=\"$ctrl.manager === false || !$ctrl.tabs || $ctrl.tabs.length < 1\"><md-list class=\"pip-menu pip-simple-list\" pip-selected=\"$ctrl.selected.tabIndex\" pip-selected-watch=\"$ctrl.selected.navId\" pip-select=\"$ctrl.onNavigationSelect($event.id)\"><md-list-item class=\"pip-simple-list-item pip-selectable flex\" ng-repeat=\"tab in $ctrl.tabs track by tab.state\" md-ink-ripple=\"\" pip-id=\"{{:: tab.state }}\"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class=\"pip-content-container\"><pip-dropdown pip-actions=\"$ctrl.tabs\" pip-dropdown-select=\"$ctrl.onDropdownSelect\" pip-active-index=\"$ctrl.selected.tabIndex\"></pip-dropdown><div class=\"pip-body p0 layout-column\" ui-view=\"\"></div></div></div><div class=\"layout-column layout-align-center-center flex\" ng-show=\"$ctrl.manager === false || !$ctrl.tabs || $ctrl.tabs.length < 1\">{{::\\'ERROR_400\\' | translate}}</div></pip-document>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-help-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGVwZW5kZW5jaWVzL1RyYW5zbGF0ZUZpbHRlci50cyIsInNyYy9pbmRleC50cyIsInNyYy9wYWdlL0hlbHBQYWdlLnRzIiwic3JjL3BhZ2UvSGVscFBhZ2VSb3V0ZXMudHMiLCJzcmMvcGFnZS9pbmRleC50cyIsInNyYy9zZXJ2aWNlL0hlbHBDb25maWcudHMiLCJzcmMvc2VydmljZS9IZWxwUGFnZVNlbGVjdGVkVGFiLnRzIiwic3JjL3NlcnZpY2UvSGVscFNlcnZpY2UudHMiLCJzcmMvc2VydmljZS9IZWxwU3RhdGVDb25maWcudHMiLCJzcmMvc2VydmljZS9IZWxwVGFiLnRzIiwic3JjL3NlcnZpY2UvaW5kZXgudHMiLCJ0ZW1wL3BpcC13ZWJ1aS1oZWxwLWh0bWwubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsQ0FBQztJQUNHLGdCQUFnQixTQUFtQztRQUM5QyxJQUFJLFlBQVksR0FBUSxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztjQUNoRCxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUUzQyxNQUFNLENBQUMsVUFBQyxHQUFHO1lBQ1AsTUFBTSxDQUFDLFlBQVksR0FBSSxZQUFZLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDcEUsQ0FBQyxDQUFBO0lBQ0wsQ0FBQztJQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDO1NBQy9CLE1BQU0sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFFeEMsQ0FBQzs7Ozs7OztBQ2JBLHFCQUFtQjtBQUNwQixrQkFBZ0I7QUFFaEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7SUFDdEIsaUJBQWlCO0lBQ2pCLGNBQWM7Q0FDakIsQ0FBQyxDQUFDO0FB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UyxFQUFFLFlBQVksQ0FBQyxDQUFDOzs7O0FDM0x2QztJQUFBO1FBRVcsU0FBSSxHQUFZLEtBQUssQ0FBQztJQUdqQyxDQUFDO0lBQUQsc0JBQUM7QUFBRCxDQUxBLEFBS0MsSUFBQTtBQUxZLDBDQUFlOzs7O0FDRTVCO0lBQUE7SUFPQSxDQUFDO0lBQUQsY0FBQztBQUFELENBUEEsQUFPQyxJQUFBO0FBUFksMEJBQU87Ozs7Ozs7Ozs7QUNGcEIsT0FBTztLQUNGLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUVuQyx3QkFBc0I7QUFDdEIsaUNBQStCO0FBQy9CLHFCQUFtQjtBQUNuQiw2QkFBMkI7QUFDM0IseUJBQXVCO0FBRXZCLGtDQUE2QjtBQUM3QiwyQ0FBc0M7QUFDdEMsK0JBQTBCO0FBQzFCLHVDQUFrQzs7QUNabEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ7XHJcbiAgICBmdW5jdGlvbiBmaWx0ZXIoJGluamVjdG9yOiBuZy5hdXRvLklJbmplY3RvclNlcnZpY2UpIHtcclxuICAgICAgICAgbGV0IHBpcFRyYW5zbGF0ZTogYW55ID0gJGluamVjdG9yLmhhcygncGlwVHJhbnNsYXRlJykgXHJcbiAgICAgICAgICAgID8gJGluamVjdG9yLmdldCgncGlwVHJhbnNsYXRlJykgOiBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gKGtleSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcGlwVHJhbnNsYXRlICA/IHBpcFRyYW5zbGF0ZS50cmFuc2xhdGUoa2V5KSB8fCBrZXkgOiBrZXk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdwaXBIZWxwLlRyYW5zbGF0ZScsIFtdKVxyXG4gICAgICAgICAgIC5maWx0ZXIoJ3RyYW5zbGF0ZScsIGZpbHRlcik7XHJcblxyXG59XHJcbiIsIu+7v2ltcG9ydCAnLi9zZXJ2aWNlJztcclxuaW1wb3J0ICcuL3BhZ2UnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3BpcEhlbHAnLCBbXHJcbiAgICAncGlwSGVscC5TZXJ2aWNlJyxcclxuICAgICdwaXBIZWxwLlBhZ2UnXHJcbl0pO1xyXG5cclxuZXhwb3J0ICogZnJvbSAnLi9zZXJ2aWNlJztcclxuIiwiaW1wb3J0IHsgSUhlbHBTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZS9JSGVscFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBIZWxwVGFiIH0gZnJvbSAnLi4vc2VydmljZS9IZWxwVGFiJztcclxuaW1wb3J0IHsgSGVscFBhZ2VTZWxlY3RlZFRhYiB9IGZyb20gJy4uL3NlcnZpY2UvSGVscFBhZ2VTZWxlY3RlZFRhYic7XHJcblxyXG5pbnRlcmZhY2UgSUhlbHBQYWdlIHtcclxuICAgIHRhYnM6IEhlbHBUYWJbXTtcclxuICAgIHNlbGVjdGVkOiBIZWxwUGFnZVNlbGVjdGVkVGFiO1xyXG4gICAgb25Ecm9wZG93blNlbGVjdDogRnVuY3Rpb247XHJcbiAgICBvbk5hdmlnYXRpb25TZWxlY3Qoc3RhdGU6IHN0cmluZyk6IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIEhlbHBQYWdlQ29udHJvbGxlciBpbXBsZW1lbnRzIElIZWxwUGFnZSwgbmcuSUNvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIHRhYnM6IEhlbHBUYWJbXTtcclxuICAgIHB1YmxpYyBzZWxlY3RlZDogSGVscFBhZ2VTZWxlY3RlZFRhYjtcclxuICAgIHB1YmxpYyBvbkRyb3Bkb3duU2VsZWN0OiBGdW5jdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlICRsb2c6IG5nLklMb2dTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgJHN0YXRlOiBuZy51aS5JU3RhdGVTZXJ2aWNlLFxyXG4gICAgICAgICRyb290U2NvcGU6IG5nLklSb290U2NvcGVTZXJ2aWNlLCBcclxuICAgICAgICAkdGltZW91dDogYW5ndWxhci5JVGltZW91dFNlcnZpY2UsXHJcbiAgICAgICAgcGlwTmF2U2VydmljZTogcGlwLm5hdi5JTmF2U2VydmljZSxcclxuICAgICAgICBwaXBIZWxwOiBJSGVscFNlcnZpY2VcclxuICAgICkge1xyXG5cclxuICAgICAgICB0aGlzLnRhYnMgPSBfLmZpbHRlcihwaXBIZWxwLmdldFRhYnMoKSwgKHRhYjogSGVscFRhYikgPT57XHJcbiAgICAgICAgICAgIGlmICh0YWIudmlzaWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy50YWJzID0gXy5zb3J0QnkodGhpcy50YWJzLCAnaW5kZXgnKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IG5ldyBIZWxwUGFnZVNlbGVjdGVkVGFiKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuJHN0YXRlLmN1cnJlbnQubmFtZSAhPT0gJ2hlbHAnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdCh0aGlzLiRzdGF0ZS5jdXJyZW50Lm5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy4kc3RhdGUuY3VycmVudC5uYW1lID09PSAnaGVscCcgJiYgcGlwSGVscC5nZXREZWZhdWx0VGFiKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0U2VsZWN0KHBpcEhlbHAuZ2V0RGVmYXVsdFRhYigpLnN0YXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGlwSGVscC5nZXREZWZhdWx0VGFiKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTZWxlY3QocGlwSGVscC5nZXREZWZhdWx0VGFiKCkuc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFwaXBIZWxwLmdldERlZmF1bHRUYWIoKSAmJiB0aGlzLnRhYnMgJiYgdGhpcy50YWJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTZWxlY3QodGhpcy50YWJzWzBdLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwaXBOYXZTZXJ2aWNlLmljb24uc2hvd01lbnUoKTtcclxuICAgICAgICBwaXBOYXZTZXJ2aWNlLmJyZWFkY3J1bWIudGV4dCA9IFwiSGVscFwiO1xyXG4gICAgICAgIHBpcE5hdlNlcnZpY2UuYWN0aW9ucy5oaWRlKCk7XHJcbiAgICAgICAgcGlwTmF2U2VydmljZS5hcHBiYXIucmVtb3ZlU2hhZG93KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5vbkRyb3Bkb3duU2VsZWN0ID0gKHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25OYXZpZ2F0aW9uU2VsZWN0KHN0YXRlLnN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0U2VsZWN0KHN0YXRlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkLnRhYiA9IF8uZmluZCh0aGlzLnRhYnMsICh0YWI6IEhlbHBUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gc3RhdGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZC50YWJJbmRleCA9IF8uaW5kZXhPZih0aGlzLnRhYnMsIHRoaXMuc2VsZWN0ZWQudGFiKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkLnRhYklkID0gc3RhdGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy4kc3RhdGUuZ28odGhpcy5zZWxlY3RlZC50YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uTmF2aWdhdGlvblNlbGVjdChzdGF0ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbml0U2VsZWN0KHN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQudGFiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHN0YXRlLmdvKHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3BpcEhlbHAuUGFnZScpXHJcbiAgICAuY29udHJvbGxlcigncGlwSGVscFBhZ2VDb250cm9sbGVyJywgSGVscFBhZ2VDb250cm9sbGVyKTtcclxuIiwie1xyXG4gICAgZnVuY3Rpb24gY29uZmlndXJlSGVscFBhZ2VSb3V0ZXMoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2hlbHAnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvaGVscD9wYXJ0eV9pZCcsXHJcbiAgICAgICAgICAgICAgICBhdXRoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnJGN0cmwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BpcEhlbHBQYWdlQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhZ2UvSGVscFBhZ2UuaHRtbCdcclxuICAgICAgICAgICAgfSk7ICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BpcEhlbHAuUGFnZScpXHJcbiAgICAgICAgLmNvbmZpZyhjb25maWd1cmVIZWxwUGFnZVJvdXRlcyk7XHJcbn0iLCJhbmd1bGFyLm1vZHVsZSgncGlwSGVscC5QYWdlJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsIFxyXG4gICAgJ3BpcEhlbHAuU2VydmljZScsXHJcbiAgICAncGlwTmF2JywgXHJcbiAgICAncGlwU2VsZWN0ZWQnLFxyXG4gICAgJ3BpcFRyYW5zbGF0ZScsXHJcbiAgICAncGlwSGVscC5UZW1wbGF0ZXMnXHJcbiAgICBdKTtcclxuXHJcbmltcG9ydCAnLi9IZWxwUGFnZSc7XHJcbmltcG9ydCAnLi9IZWxwUGFnZVJvdXRlcyc7IiwiaW1wb3J0IHsgSGVscFRhYiB9IGZyb20gJy4vSGVscFRhYic7XHJcblxyXG5leHBvcnQgY2xhc3MgSGVscENvbmZpZyB7XHJcbiAgICBwdWJsaWMgZGVmYXVsdFRhYjogc3RyaW5nO1xyXG4gICAgcHVibGljIHRhYnM6IEhlbHBUYWJbXSA9IFtdO1xyXG4gICAgcHVibGljIHRpdGxlVGV4dDogc3RyaW5nID0gJ1NFVFRJTkdTX1RJVExFJztcclxuICAgIHB1YmxpYyB0aXRsZUxvZ286IHN0cmluZyA9IG51bGw7XHJcbiAgICBwdWJsaWMgaXNOYXZJY29uOiBib29sZWFuID0gdHJ1ZTtcclxufVxyXG4iLCJpbXBvcnQgeyBIZWxwVGFiIH0gZnJvbSAnLi9IZWxwVGFiJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWxwUGFnZVNlbGVjdGVkVGFiIHtcclxuICAgIHB1YmxpYyB0YWI6IEhlbHBUYWI7XHJcbiAgICBwdWJsaWMgdGFiSW5kZXg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB0YWJJZDogc3RyaW5nO1xyXG59IiwiaW1wb3J0IHsgSGVscENvbmZpZyB9IGZyb20gXCIuL0hlbHBDb25maWdcIjtcclxuaW1wb3J0IHsgSGVscFRhYiB9IGZyb20gJy4vSGVscFRhYic7XHJcbmltcG9ydCB7IElIZWxwU2VydmljZSB9IGZyb20gXCIuL0lIZWxwU2VydmljZVwiO1xyXG5pbXBvcnQgeyBJSGVscFByb3ZpZGVyIH0gZnJvbSBcIi4vSUhlbHBTZXJ2aWNlXCI7XHJcblxyXG5jbGFzcyBIZWxwU2VydmljZSBpbXBsZW1lbnRzIElIZWxwU2VydmljZSB7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvbmZpZzogSGVscENvbmZpZykge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZ1bGxTdGF0ZU5hbWUoc3RhdGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdoZWxwLicgKyBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0RGVmYXVsdFRhYihuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIV8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHRhYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiLnN0YXRlID09PSAnaGVscC4nICsgbmFtZTtcclxuICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYiB3aXRoIHN0YXRlIG5hbWUgXCInICsgbmFtZSArICdcIiBpcyBub3QgcmVnaXN0ZXJlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlnLmRlZmF1bHRUYWIgPSB0aGlzLmdldEZ1bGxTdGF0ZU5hbWUobmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldERlZmF1bHRUYWIoKTogSGVscFRhYiB7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRUYWI6IEhlbHBUYWI7XHJcbiAgICAgICAgZGVmYXVsdFRhYiA9IF8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHA6IEhlbHBUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHAuc3RhdGUgPT09IHRoaXMuX2NvbmZpZy5kZWZhdWx0VGFiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBfLmNsb25lRGVlcChkZWZhdWx0VGFiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd1RpdGxlVGV4dChuZXdUaXRsZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKG5ld1RpdGxlVGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVUZXh0ID0gbmV3VGl0bGVUZXh0O1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVMb2dvID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcudGl0bGVUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93VGl0bGVMb2dvKG5ld1RpdGxlTG9nbzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobmV3VGl0bGVMb2dvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZUxvZ28gPSBuZXdUaXRsZUxvZ287XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZVRleHQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy50aXRsZUxvZ287XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dOYXZJY29uKHZhbHVlOiBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmlzTmF2SWNvbiA9ICEhdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmlzTmF2SWNvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGFicygpOiBIZWxwVGFiW10ge1xyXG4gICAgICAgIHJldHVybiBfLmNsb25lRGVlcCh0aGlzLl9jb25maWcudGFicyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBIZWxwUHJvdmlkZXIgaW1wbGVtZW50cyBJSGVscFByb3ZpZGVyLCBuZy5JU2VydmljZVByb3ZpZGVyIHtcclxuICAgIHByaXZhdGUgX3NlcnZpY2U6IEhlbHBTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBfY29uZmlnOiBIZWxwQ29uZmlnID0gbmV3IEhlbHBDb25maWcoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRzdGF0ZVByb3ZpZGVyOiBuZy51aS5JU3RhdGVQcm92aWRlcikgeyB9XHJcblxyXG4gICAgcHVibGljIGdldEZ1bGxTdGF0ZU5hbWUoc3RhdGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdoZWxwLicgKyBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RGVmYXVsdFRhYigpOiBIZWxwVGFiIHtcclxuICAgICAgICBsZXQgZGVmYXVsdFRhYjogSGVscFRhYjtcclxuXHJcbiAgICAgICAgZGVmYXVsdFRhYiA9IF8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHApID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHAuc3RhdGUgPT09IHRoaXMuX2NvbmZpZy5kZWZhdWx0VGFiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAoZGVmYXVsdFRhYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFRhYih0YWJPYmo6IEhlbHBUYWIpOiB2b2lkIHtcclxuICAgICAgICBsZXQgZXhpc3RpbmdUYWI6IEhlbHBUYWI7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVRhYih0YWJPYmopO1xyXG4gICAgICAgIGV4aXN0aW5nVGFiID0gXy5maW5kKHRoaXMuX2NvbmZpZy50YWJzLCAocCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcC5zdGF0ZSA9PT0gJ2hlbHAuJyArIHRhYk9iai5zdGF0ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdUYWIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWIgd2l0aCBzdGF0ZSBuYW1lIFwiJyArIHRhYk9iai5zdGF0ZSArICdcIiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbmZpZy50YWJzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5nZXRGdWxsU3RhdGVOYW1lKHRhYk9iai5zdGF0ZSksXHJcbiAgICAgICAgICAgIHRpdGxlOiB0YWJPYmoudGl0bGUsXHJcbiAgICAgICAgICAgIGluZGV4OiB0YWJPYmouaW5kZXggfHwgMTAwMDAwLFxyXG4gICAgICAgICAgICBhY2Nlc3M6IHRhYk9iai5hY2Nlc3MsXHJcbiAgICAgICAgICAgIHZpc2libGU6IHRhYk9iai52aXNpYmxlICE9PSBmYWxzZSxcclxuICAgICAgICAgICAgc3RhdGVDb25maWc6IF8uY2xvbmVEZWVwKHRhYk9iai5zdGF0ZUNvbmZpZylcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLiRzdGF0ZVByb3ZpZGVyLnN0YXRlKHRoaXMuZ2V0RnVsbFN0YXRlTmFtZSh0YWJPYmouc3RhdGUpLCB0YWJPYmouc3RhdGVDb25maWcpO1xyXG5cclxuICAgICAgICAvLyBpZiB3ZSBqdXN0IGFkZGVkIGZpcnN0IHN0YXRlIGFuZCBubyBkZWZhdWx0IHN0YXRlIGlzIHNwZWNpZmllZFxyXG4gICAgICAgIGlmICh0eXBlb2YgXy5pc1VuZGVmaW5lZCh0aGlzLl9jb25maWcuZGVmYXVsdFRhYikgJiYgdGhpcy5fY29uZmlnLnRhYnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFRhYih0YWJPYmouc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0RGVmYXVsdFRhYihuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBUT0RPIFthcGlkaGlybnlpXSBleHRyYWN0IGV4cHJlc3Npb24gaW5zaWRlICdpZicgaW50byB2YXJpYWJsZS4gSXQgaXNuJ3QgcmVhZGFibGUgbm93LlxyXG4gICAgICAgIGlmICghXy5maW5kKHRoaXMuX2NvbmZpZy50YWJzLCAodGFiOiBIZWxwVGFiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWIuc3RhdGUgPT09ICdoZWxwLicgKyBuYW1lO1xyXG4gICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFiIHdpdGggc3RhdGUgbmFtZSBcIicgKyBuYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcuZGVmYXVsdFRhYiA9IHRoaXMuZ2V0RnVsbFN0YXRlTmFtZShuYW1lKTtcclxuICAgICAgICAvL3RoaXMuJHN0YXRlUHJvdmlkZXIuZ28odGhpcy5fY29uZmlnLmRlZmF1bHRUYWIpO1xyXG4gICAgICAgIC8vcGlwQXV0aFN0YXRlUHJvdmlkZXIucmVkaXJlY3QoJ2hlbHAnLCBnZXRGdWxsU3RhdGVOYW1lKG5hbWUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlcyBwYXNzZWQgdGFiIGNvbmZpZyBvYmplY3RcclxuICAgICAqIElmIHBhc3NlZCB0YWIgaXMgbm90IHZhbGlkIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3JcclxuICAgICAqL1xyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVUYWIodGFiT2JqOiBIZWxwVGFiKSB7XHJcbiAgICAgICAgaWYgKCF0YWJPYmogfHwgIV8uaXNPYmplY3QodGFiT2JqKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb2JqZWN0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFiT2JqLnN0YXRlID09PSBudWxsIHx8IHRhYk9iai5zdGF0ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWIgc2hvdWxkIGhhdmUgdmFsaWQgQW5ndWxhciBVSSByb3V0ZXIgc3RhdGUgbmFtZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRhYk9iai5hY2Nlc3MgJiYgIV8uaXNGdW5jdGlvbih0YWJPYmouYWNjZXNzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiYWNjZXNzXCIgc2hvdWxkIGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGFiT2JqLnN0YXRlQ29uZmlnIHx8ICFfLmlzT2JqZWN0KHRhYk9iai5zdGF0ZUNvbmZpZykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0YXRlIGNvbmZpZ3VyYXRpb24gb2JqZWN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93VGl0bGVUZXh0KG5ld1RpdGxlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobmV3VGl0bGVUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZVRleHQgPSBuZXdUaXRsZVRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZUxvZ28gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy50aXRsZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dUaXRsZUxvZ28obmV3VGl0bGVMb2dvOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChuZXdUaXRsZUxvZ28pIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnRpdGxlTG9nbyA9IG5ld1RpdGxlTG9nbztcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnRpdGxlVGV4dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLnRpdGxlTG9nbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd05hdkljb24odmFsdWU6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIV8uaXNOdWxsKHZhbHVlKSAmJiAhXy5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmlzTmF2SWNvbiA9ICEhdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmlzTmF2SWNvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgJGdldCgpOiBJSGVscFNlcnZpY2Uge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgaWYgKF8uaXNOdWxsKHRoaXMuX3NlcnZpY2UpIHx8IF8uaXNVbmRlZmluZWQodGhpcy5fc2VydmljZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VydmljZSA9IG5ldyBIZWxwU2VydmljZSh0aGlzLl9jb25maWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2U7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdwaXBIZWxwLlNlcnZpY2UnKVxyXG4gICAgLnByb3ZpZGVyKCdwaXBIZWxwJywgSGVscFByb3ZpZGVyKTtcclxuIiwiZXhwb3J0IGNsYXNzIEhlbHBTdGF0ZUNvbmZpZyB7XHJcbiAgICBwdWJsaWMgdXJsOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYXV0aDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHVibGljIHRlbXBsYXRlVXJsPzogc3RyaW5nO1xyXG4gICAgcHVibGljIHRlbXBsYXRlPzogc3RyaW5nO1xyXG59XHJcbiIsImltcG9ydCB7IEhlbHBTdGF0ZUNvbmZpZyB9IGZyb20gJy4vSGVscFN0YXRlQ29uZmlnJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWxwVGFiIHtcclxuICAgIHB1YmxpYyBzdGF0ZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaW5kZXg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhY2Nlc3M6IEZ1bmN0aW9uO1xyXG4gICAgcHVibGljIHZpc2libGU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgc3RhdGVDb25maWc6IEhlbHBTdGF0ZUNvbmZpZztcclxufVxyXG5cclxuIiwiYW5ndWxhclxyXG4gICAgLm1vZHVsZSgncGlwSGVscC5TZXJ2aWNlJywgW10pO1xyXG5cclxuaW1wb3J0ICcuL0hlbHBDb25maWcnO1xyXG5pbXBvcnQgJy4vSGVscFBhZ2VTZWxlY3RlZFRhYic7XHJcbmltcG9ydCAnLi9IZWxwVGFiJztcclxuaW1wb3J0ICcuL0hlbHBTdGF0ZUNvbmZpZyc7XHJcbmltcG9ydCAnLi9IZWxwU2VydmljZSc7XHJcblxyXG5leHBvcnQgKiBmcm9tICcuL0hlbHBDb25maWcnO1xyXG5leHBvcnQgKiBmcm9tICcuL0hlbHBQYWdlU2VsZWN0ZWRUYWInO1xyXG5leHBvcnQgKiBmcm9tICcuL0hlbHBUYWInO1xyXG5leHBvcnQgKiBmcm9tICcuL0hlbHBTdGF0ZUNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSGVscFNlcnZpY2UnO1xyXG4iLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwSGVscC5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEhlbHAuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYWdlL0hlbHBQYWdlLmh0bWwnLFxuICAgICc8bWQtdG9vbGJhciBjbGFzcz1cInBpcC1hcHBiYXItZXh0XCI+PC9tZC10b29sYmFyPjxwaXAtZG9jdW1lbnQgd2lkdGg9XCI4MDBcIiBtaW4taGVpZ2h0PVwiNDAwXCIgY2xhc3M9XCJwaXAtaGVscFwiPjxkaXYgY2xhc3M9XCJwaXAtbWVudS1jb250YWluZXJcIiBuZy1oaWRlPVwiJGN0cmwubWFuYWdlciA9PT0gZmFsc2UgfHwgISRjdHJsLnRhYnMgfHwgJGN0cmwudGFicy5sZW5ndGggPCAxXCI+PG1kLWxpc3QgY2xhc3M9XCJwaXAtbWVudSBwaXAtc2ltcGxlLWxpc3RcIiBwaXAtc2VsZWN0ZWQ9XCIkY3RybC5zZWxlY3RlZC50YWJJbmRleFwiIHBpcC1zZWxlY3RlZC13YXRjaD1cIiRjdHJsLnNlbGVjdGVkLm5hdklkXCIgcGlwLXNlbGVjdD1cIiRjdHJsLm9uTmF2aWdhdGlvblNlbGVjdCgkZXZlbnQuaWQpXCI+PG1kLWxpc3QtaXRlbSBjbGFzcz1cInBpcC1zaW1wbGUtbGlzdC1pdGVtIHBpcC1zZWxlY3RhYmxlIGZsZXhcIiBuZy1yZXBlYXQ9XCJ0YWIgaW4gJGN0cmwudGFicyB0cmFjayBieSB0YWIuc3RhdGVcIiBtZC1pbmstcmlwcGxlPVwiXCIgcGlwLWlkPVwie3s6OiB0YWIuc3RhdGUgfX1cIj48cD57ezo6dGFiLnRpdGxlIHwgdHJhbnNsYXRlfX08L3A+PC9tZC1saXN0LWl0ZW0+PC9tZC1saXN0PjxkaXYgY2xhc3M9XCJwaXAtY29udGVudC1jb250YWluZXJcIj48cGlwLWRyb3Bkb3duIHBpcC1hY3Rpb25zPVwiJGN0cmwudGFic1wiIHBpcC1kcm9wZG93bi1zZWxlY3Q9XCIkY3RybC5vbkRyb3Bkb3duU2VsZWN0XCIgcGlwLWFjdGl2ZS1pbmRleD1cIiRjdHJsLnNlbGVjdGVkLnRhYkluZGV4XCI+PC9waXAtZHJvcGRvd24+PGRpdiBjbGFzcz1cInBpcC1ib2R5IHAwIGxheW91dC1jb2x1bW5cIiB1aS12aWV3PVwiXCI+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImxheW91dC1jb2x1bW4gbGF5b3V0LWFsaWduLWNlbnRlci1jZW50ZXIgZmxleFwiIG5nLXNob3c9XCIkY3RybC5tYW5hZ2VyID09PSBmYWxzZSB8fCAhJGN0cmwudGFicyB8fCAkY3RybC50YWJzLmxlbmd0aCA8IDFcIj57ezo6XFwnRVJST1JfNDAwXFwnIHwgdHJhbnNsYXRlfX08L2Rpdj48L3BpcC1kb2N1bWVudD4nKTtcbn1dKTtcbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcC13ZWJ1aS1oZWxwLWh0bWwubWluLmpzLm1hcFxuIl19"}